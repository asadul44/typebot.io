{"version":3,"sources":["../src/lib/gtag.ts"],"sourcesContent":["import { GoogleAnalyticsOptions } from '@typebot.io/schemas'\r\n\r\ndeclare const gtag: (\r\n  type: string,\r\n  action: string | undefined,\r\n  options: {\r\n    event_category: string | undefined\r\n    event_label: string | undefined\r\n    value: number | undefined\r\n  }\r\n) => void\r\n\r\nconst initGoogleAnalytics = (id: string): Promise<void> =>\r\n  new Promise((resolve) => {\r\n    const existingScript = document.getElementById('gtag')\r\n    if (!existingScript) {\r\n      const script = document.createElement('script')\r\n      script.src = `https://www.googletagmanager.com/gtag/js?id=${id}`\r\n      script.id = 'gtag'\r\n      const initScript = document.createElement('script')\r\n      initScript.innerHTML = `window.dataLayer = window.dataLayer || [];\r\n      function gtag(){dataLayer.push(arguments);}\r\n      gtag('js', new Date());\r\n    \r\n      gtag('config', '${id}');\r\n      `\r\n      document.body.appendChild(script)\r\n      document.body.appendChild(initScript)\r\n      script.onload = () => {\r\n        resolve()\r\n      }\r\n    }\r\n    if (existingScript) resolve()\r\n  })\r\n\r\nexport const sendGaEvent = (options: GoogleAnalyticsOptions) => {\r\n  if (!options) return\r\n  gtag('event', options.action, {\r\n    event_category: options.category,\r\n    event_label: options.label,\r\n    value: options.value as number,\r\n  })\r\n}\r\n\r\nexport default initGoogleAnalytics\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,IAAM,sBAAsB,CAAC,OAC3B,IAAI,QAAQ,CAAC,YAAY;AACvB,QAAM,iBAAiB,SAAS,eAAe,MAAM;AACrD,MAAI,CAAC,gBAAgB;AACnB,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,MAAM,+CAA+C;AAC5D,WAAO,KAAK;AACZ,UAAM,aAAa,SAAS,cAAc,QAAQ;AAClD,eAAW,YAAY;AAAA;AAAA;AAAA;AAAA,wBAIL;AAAA;AAElB,aAAS,KAAK,YAAY,MAAM;AAChC,aAAS,KAAK,YAAY,UAAU;AACpC,WAAO,SAAS,MAAM;AACpB,cAAQ;AAAA,IACV;AAAA,EACF;AACA,MAAI;AAAgB,YAAQ;AAC9B,CAAC;AAEI,IAAM,cAAc,CAAC,YAAoC;AAC9D,MAAI,CAAC;AAAS;AACd,OAAK,SAAS,QAAQ,QAAQ;AAAA,IAC5B,gBAAgB,QAAQ;AAAA,IACxB,aAAa,QAAQ;AAAA,IACrB,OAAO,QAAQ;AAAA,EACjB,CAAC;AACH;AAEA,IAAO,eAAQ;","names":[]}